<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Diccionario E L I N V</title>
	<!-- Favicon-->
	<link rel="icon" type="image/x-icon" href="./favicon.ico" />
	<link rel="stylesheet" href="./css/style.css">
	<script src="./js/definicionesA.js"></script>
	<script src="./js/definicionesB.js"></script>
	<script src="./js/definicionesC.js"></script>
	<script src="./js/definicionesD.js"></script>
	<script src="./js/definicionesE.js"></script>
	<script src="./js/definicionesF.js"></script>
	<script src="./js/definicionesG.js"></script>
	<script src="./js/definicionesH.js"></script>
	<script src="./js/definicionesI.js"></script>
	<script src="./js/definicionesJ.js"></script>
	<script src="./js/definicionesK.js"></script>
	<script src="./js/definicionesL.js"></script>
	<script src="./js/definicionesM.js"></script>
	<script src="./js/definicionesN.js"></script>
	<script src="./js/definicionesÑ.js"></script>
	<script src="./js/definicionesO.js"></script>
	<script src="./js/definicionesP.js"></script>
	<script src="./js/definicionesQ.js"></script>
	<script src="./js/definicionesR.js"></script>
	<script src="./js/definicionesS.js"></script>
	<script src="./js/definicionesT.js"></script>
	<script src="./js/definicionesU.js"></script>
	<script src="./js/definicionesV.js"></script>
	<script src="./js/definicionesW.js"></script>
	<script src="./js/definicionesX.js"></script>
	<script src="./js/definicionesY.js"></script>
	<script src="./js/definicionesZ.js"></script>

	<style>
		#datalistElvArrBid {
			width: 100%;
			padding-top: 12px;
			padding-bottom: 12px;
			text-align: left;
		}

		#datalistElvArrBid th {
			padding-top: 12px;
			padding-bottom: 12px;
			text-align: left;
			background-color: #04AA6D;
			color: white;
		}

		/* tablet y telefono horizontal */
		@media screen and (max-width: 950px) {
			.titulo {
				font-size: 1em;
			}
		}

		/* Responsive teléfono vertical */
		@media screen and (max-width: 600px) {
			.titulo {
				font-size: 1em;
			}

			img {
				width: 100%;
			}

		}
	</style>
</head>

<body>

	<div class="contenedor">

		<div class="titulo">Diccionario Elinv<br>Definiciones</div>
		<hr class="linHR">


		<!-- Datalist 
		------------------------------------------------ -->
		<!-- Boton para buscar -->
		<!-- Param = 1 => palabra, 2 => definicion -->
		<input id="butBuscar" class="ledRes" type="button" value="🔎 Buscar por palabra" onclick="hallar(1);">
		<input id="butBuscar" class="ledRes" type="button" value="🔎 Buscar por Definición" onclick="hallar(2);">
		<br>
		<!-- Input de busqueda -->
		<input id="search" class="searchBut" type="text" placeholder="Ingrese texto a buscar" />
		<!-- Muestra la cantidad de resultados alcanzados -->
		<input id="lblHallados" class="ledRes" type="label" placeholder="Resultados" disabled>
		<!-- Muestra un solo resultado de la fila seleccionada
		sea con el mouse o con el teclado. -->
		<div class="margenArriba">
			<input id="lblinnerHTML" class="ledResText vertical-center" type="label">
		</div>
		<!-- Es visible o invisible dependiendo si hay o no resultados. 
		Muestra el datalist con los resultados de la busqueda. -->
		<div id="ListDefiniciones" class="ClsDLElinv in"></div>
		<hr class="linHR">

	</div>

	<script>
		// para la insensibilidad en acentos.
		let accent_map = { 'á': 'a', 'é': 'e', 'í': 'i', 'ó': 'o', 'ú': 'u', 'Á': 'a', 'É': 'e', 'è': 'e', 'Í': 'i', 'Ó': 'o', 'Ú': 'u' };

		// Para poder buscar a pesar de los acentos
		function obviarAcentos(s) {
			if (!s) { return ''; }
			var ret = '';
			for (var i = 0; i < s.length; i++) {
				ret += accent_map[s.charAt(i)] || s.charAt(i);
			}
			return ret;
		};

		//DefinicionesA
		findSubString = function (s, arr, tipo) {
			let newArr = [];
			for (var i = 0; i < arr.length; i++) {
				// Solo Palabras
				let sinAcentos = "";
				if (tipo == 1) {
					sinAcentos = obviarAcentos(arr[i][0]);
				} else if (tipo == 2) {
					sinAcentos = obviarAcentos(arr[i][1]);
				}
				s = obviarAcentos(s);
				if (sinAcentos.indexOf(s) !== -1) {
					newArr.push(i);
				}
				// Solo definiciones
				// sinAcentos = obviarAcentos(arr[i][1]);
				// if (sinAcentos.indexOf(s) !== -1) {
				// 	newArr.push(i);
				// }
			}
			return newArr;
		};

		// función para hallar
		// Param = 1 => palabra, 2 => definicion
		let hallar = (tipo) => {
			let gralRes = document.getElementById("ListDefiniciones");
			// string encabezado de la tabla
			let tableCont = `<div class="divTable">
            	<div class="divTableBody">
            	<div class="divTableRow">
            	<div class="divTableTit">Palabra</div>
            	<div class="divTableTit">Definición</div>
            	</div>`;

			// vamos recomendando a medida que se escribe
			let Definiciones = [];
			let palSearch = search.value.toLowerCase();
			
			// si la busqueda es por palabra
			if(tipo == 1){
				switch (palSearch.charAt(0)) {
					case 'a':
						Definiciones = DefinicionesA;
						break;
					case 'b':
						Definiciones = DefinicionesB;
						break;
					case 'c':
						Definiciones = DefinicionesC;
						break;
					case 'd':
						Definiciones = DefinicionesD;
						break;
					case 'e':
						Definiciones = DefinicionesE;
						break;
					case 'f':
						Definiciones = DefinicionesF;
						break;
					case 'g':
						Definiciones = DefinicionesG;
						break;
					case 'h':
						Definiciones = DefinicionesH;
						break;
					case 'i':
						Definiciones = DefinicionesI;
						break;
					case 'j':
						Definiciones = DefinicionesJ;
						break;
					case 'k':
						Definiciones = DefinicionesK;
						break;
					case 'l':
						Definiciones = DefinicionesL;
						break;
					case 'm':
						Definiciones = DefinicionesM;
						break;
					case 'n':
						Definiciones = DefinicionesN;
						break;
					case 'ñ':
						Definiciones = DefinicionesÑ;
						break;
					case 'o':
						Definiciones = DefinicionesO;
						break;
					case 'p':
						Definiciones = DefinicionesP;
						break;
					case 'q':
						Definiciones = DefinicionesQ;
						break;
					case 'r':
						Definiciones = DefinicionesR;
						break;
					case 's':
						Definiciones = DefinicionesS;
						break;
					case 't':
						Definiciones = DefinicionesT;
						break;
					case 'u':
						Definiciones = DefinicionesU;
						break;
					case 'v':
						Definiciones = DefinicionesV;
						break;
					case 'w':
						Definiciones = DefinicionesW;
						break;
					case 'x':
						Definiciones = DefinicionesX;
						break;
					case 'y':
						Definiciones = DefinicionesY;
						break;
					case 'z':
						Definiciones = DefinicionesZ;
						break;
					default:
						console.log(`Opción inválida!`);
				};
			}

			// Si es por definición buscamos
			// en todas las letras
			if (tipo == 2) {
				Definiciones = DefinicionesA;
				Definiciones = Definiciones.concat(DefinicionesB);
				Definiciones = Definiciones.concat(DefinicionesC);
				Definiciones = Definiciones.concat(DefinicionesD);
				Definiciones = Definiciones.concat(DefinicionesE);
				Definiciones = Definiciones.concat(DefinicionesF);
				Definiciones = Definiciones.concat(DefinicionesG);
				Definiciones = Definiciones.concat(DefinicionesH);
				Definiciones = Definiciones.concat(DefinicionesI);
				Definiciones = Definiciones.concat(DefinicionesJ);
				Definiciones = Definiciones.concat(DefinicionesK);
				Definiciones = Definiciones.concat(DefinicionesL);
				Definiciones = Definiciones.concat(DefinicionesM);
				Definiciones = Definiciones.concat(DefinicionesN);
				Definiciones = Definiciones.concat(DefinicionesÑ);
				Definiciones = Definiciones.concat(DefinicionesO);
				Definiciones = Definiciones.concat(DefinicionesP);
				Definiciones = Definiciones.concat(DefinicionesQ);
				Definiciones = Definiciones.concat(DefinicionesR);
				Definiciones = Definiciones.concat(DefinicionesS);
				Definiciones = Definiciones.concat(DefinicionesT);
				Definiciones = Definiciones.concat(DefinicionesU);
				Definiciones = Definiciones.concat(DefinicionesV);
				Definiciones = Definiciones.concat(DefinicionesW);
				Definiciones = Definiciones.concat(DefinicionesX);
				Definiciones = Definiciones.concat(DefinicionesY);
				Definiciones = Definiciones.concat(DefinicionesZ);

			}

			let arr = findSubString(palSearch, Definiciones, tipo);
			lblHallados.value = arr.length;

			// Creamos la vista
			for (const key in arr) {
				//console.log(Definiciones[arr[key]][0]);
				tableCont += `
	            <div class="divTableRow" id="aB${key}" tabindex="aB${key}">
                <div class="divTableCell">${Definiciones[arr[key]][0]}</div>
                <div class="divTableCell1">${Definiciones[arr[key]][1]}</div>
    	        </div>`;

			}
			// Final de la vista
			tableCont += `
                </div>
            	</div>`;
			let nodoCont = tableCont.toDOM();
			gralRes.innerHTML = "";
			gralRes.appendChild(nodoCont);
		};

		// Para crear fragment de document => nodes
		String.prototype.toDOM = function () {
			var d = document
				, i
				, a = d.createElement("div")
				, b = d.createDocumentFragment();
			a.innerHTML = this;
			while (i = a.firstChild) b.appendChild(i);
			return b;
		};

	</script>
</body>

</html>